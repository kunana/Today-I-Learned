# TIL   / 2018 -05-09
  ## Unity
    ### DirectX< C# >

> 다이렉트 X 역사에 대해서.
> 

과거 MS-DOS 게임은 그래픽 카드의 펌웨어 를 가지고 와서 화면에 뿌려줬음. 그래픽 카드 마다 펌웨어가 달라서 그래픽카드 가 지우너을 안하면 못돌리는 도스 게임도 많았음.

이것을 윈도우 이 역할을 제공하게 된것이 시초.
사용자가 화면에 점을 찍는다 라고 했을때,  GDI 에서 그래픽 카드 보내 주었음.

그러나 GDI 를 통해서 그래픽 카드로 보내주는것은 속도가 느렸기 때문에, 다이렉트X 를 이용해서 그래픽 카드로 바로 보내주게 됨.

> Windows API

다이렉트 X 는 윈도우에서 시작되기 때문에 먼저 윈도우 창을 띄워야 한다.

```cs
public void WINMAIN()
{
    //윈도우 만들기
    //메세지 프로시저 -> 들어온 프로시저를 처리하고, 프로시저가 없을때는 IDLE 상태로 돌아감
    //루프 -> 윈도우는 무한 루프를 돌면서 메세지 프로시저에서 온 작업들을 처리한다.
}
```


1. C++ 새 윈도우 응용데스크톱 프로젝트 생성
2. 솔루션 탐색기 - 리소스 파일 *.rc 로 끝나는 파일 더블클릭 - 
3. String Table 폴더 안 String Table 오픈
![](/img/2018-11-26-13-47-20.png)

    APP_TITLE 의 캡션은 창이름.

구조는  윈도우 클래스 등록 -> 응용 프로그램 초기화 -> 윈도우 메세지 루프.

1. HWND 

윈도우 창에 대한 주소

2. HINSTANCE 

키보드와 마우스등의 입력제어

3. 이것들이 WINMAIN() 에서 시작됨

![](/img/2018-11-26-14-16-03.png)

![](/img/2018-11-26-14-16-46.png)

![](/img/2018-11-26-14-17-02.png)

> DX 11
1. DX 11 샘플1 추가.
2. 솔루션 속성 - vbc 라이브러리 - 포함디렉터리 & 참조디렉터리에 해당 경로 새로 추가
![](/img/2018-11-26-14-40-14.png)

> DX 샘플 설명

>헤더 파일
![](/img/2018-11-26-14-50-32.png)

>DLL 과 lib 의 차이

1. DLL -> Dynamic Linked Library 그래서 exe 파일에서 특정함수를 호출하면 실시간으로 읽어옴. EXE 파일의 덩치도 작음. 그래서 업데이트 할때 실행 파일을 업데이트 하지않고 DLL 만 교체 하면 되는것.

2. lib -> 소스코드 유출 시키지 않기 위해서 미리 컴파일된것을 줌. 그러면 컴파일 속도도 빨라지고 소스가 공개 가 안됨. 그러나, EXE 파일을 만들때 lib 파일은 exe 에 포함 되므로 exe 파일의 덩치가 커짐

> Debug 빌드와 release 빌드에서 유의할점.
c++ 에서 release 빌드할때 변수 초기화를 안해주면 쓰레기값도 안들어감. 반드시 초기화 해줘야함.

![](/img/2018-11-26-14-57-40.png)

> 스왑 체인

![](/img/2018-11-26-15-02-44.png)

윈도우 클래스와 창을 만들고, 이후 InitD3D 에서 초기화 해줌.
![](/img/2018-11-26-15-03-46.png)